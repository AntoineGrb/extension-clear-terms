{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["site_name", "categories", "detected_language"],
  "properties": {
    "site_name": {
      "type": "string",
      "description": "Nom du site ou service analysé (ex: Google, Facebook, Amazon)"
    },
    "detected_language": {
      "type": "string",
      "enum": ["fr", "en"],
      "description": "Langue détectée des CGU analysées (fr = français, en = anglais)"
    },
    "categories": {
      "type": "object",
      "required": [
        "data_collection",
        "data_usage",
        "data_sharing",
        "user_rights",
        "data_retention",
        "security_measures",
        "policy_changes",
        "legal_compliance",
        "cookies_tracking",
        "children_privacy",
        "user_content_rights",
        "dispute_resolution"
      ],
      "properties": {
        "data_collection": {
          "$ref": "#/definitions/category"
        },
        "data_usage": {
          "$ref": "#/definitions/category"
        },
        "data_sharing": {
          "$ref": "#/definitions/category"
        },
        "user_rights": {
          "$ref": "#/definitions/category"
        },
        "data_retention": {
          "$ref": "#/definitions/category"
        },
        "security_measures": {
          "$ref": "#/definitions/category"
        },
        "policy_changes": {
          "$ref": "#/definitions/category"
        },
        "legal_compliance": {
          "$ref": "#/definitions/category"
        },
        "cookies_tracking": {
          "$ref": "#/definitions/category"
        },
        "children_privacy": {
          "$ref": "#/definitions/category"
        },
        "user_content_rights": {
          "$ref": "#/definitions/category"
        },
        "dispute_resolution": {
          "$ref": "#/definitions/category"
        }
      }
    }
  },
  "definitions": {
    "category": {
      "type": "object",
      "required": ["status", "comment"],
      "properties": {
        "status": {
          "type": "string",
          "enum": ["green", "amber", "red", "n/a"],
          "description": "green = favorable, amber = acceptable avec réserves, red = préoccupant, n/a = non mentionné"
        },
        "comment": {
          "type": "string",
          "description": "Explication courte (1-2 phrases) de l'évaluation"
        }
      }
    }
  }
}
